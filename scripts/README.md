# üõ†Ô∏è DESQEMU Build Scripts

–ö–æ–ª–ª–µ–∫—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤ DESQEMU —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º QEMU.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤

### üèóÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏

- **`build-portable.sh`** - –≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞
- **`download-qemu.sh`** - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ QEMU –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –∏–∑ Alpine —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è  
- **`create-portable-archive.sh`** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞
- **`create-archive.sh`** - —É–ø–∞–∫–æ–≤–∫–∞ –≤ –∏—Ç–æ–≥–æ–≤—ã–π tar.gz –∞—Ä—Ö–∏–≤

### üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã

- **`create-universal-installer.sh`** - —Å–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
- **`test-portable-local.sh`** - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤

### üê≥ Docker —Å–∫—Ä–∏–ø—Ç—ã (–∏–∑ Dockerfile)

- **`auto-start-compose.sh`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ docker-compose —Å GUI
- **`start-desktop.sh`** - –∑–∞–ø—É—Å–∫ X11/VNC –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- **`desqemu-services.start`** - init —Å–∫—Ä–∏–ø—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **`user-profile.sh`** - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–æ–Ω—Ç–µ–Ω—Ç

- **`create-alpine-readme.sh`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è README –¥–ª—è Alpine –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
- **`create-release-notes.sh`** - —Å–æ–∑–¥–∞–Ω–∏–µ release notes –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞
- **`create-portable-release-notes.sh`** - —Å–æ–∑–¥–∞–Ω–∏–µ release notes –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤
- **`create-quick-start-scripts.sh`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è quick-start —Å–∫—Ä–∏–ø—Ç–æ–≤
- **`create-all-docs.sh`** - –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
./scripts/build-portable.sh x86_64

# –°–±–æ—Ä–∫–∞ –¥–ª—è ARM64
./scripts/build-portable.sh aarch64
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **x86_64** - Intel/AMD 64-bit
- **aarch64** - ARM 64-bit  
- **arm64** - ARM 64-bit (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏
./test-portable-local.sh
```

## üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã:

- `desqemu-portable-microvm-{arch}.tar.gz` - –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –∞—Ä—Ö–∏–≤
- `install-desqemu-portable-{arch}.sh` - —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `install-desqemu-portable.sh` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞

```
{architecture}/
‚îú‚îÄ‚îÄ bin/                    # QEMU –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ qemu-system-x86_64
‚îÇ   ‚îú‚îÄ‚îÄ qemu-img
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ libexec/               # QEMU helper'—ã
‚îú‚îÄ‚îÄ share/qemu/            # QEMU –¥–∞–Ω–Ω—ã–µ (BIOS, etc.)
‚îú‚îÄ‚îÄ alpine-vm.qcow2        # –ì–æ—Ç–æ–≤–∞—è –º–∏–∫—Ä–æ–≤–º
‚îú‚îÄ‚îÄ bzImage                # Kernel
‚îú‚îÄ‚îÄ initramfs-virt         # Initramfs
‚îú‚îÄ‚îÄ start-microvm.sh       # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ stop-microvm.sh        # –°–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ check-status.sh        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üåê GitHub Actions –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å GitHub Actions workflow –≤ `.github/workflows/alpine-podman-distribution.yml`:

```yaml
- name: üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞
  run: |
    chmod +x scripts/build-portable.sh
    scripts/build-portable.sh ${{ matrix.architecture }}
```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–∞—á–∞–Ω–Ω—ã—Ö QEMU —Ñ–∞–π–ª–æ–≤

```bash
# –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è download-qemu.sh
ls -la qemu-portable/{architecture}/usr/bin/qemu-*
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∞—Ä—Ö–∏–≤–∞

```bash
# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å
tar -tzf desqemu-portable-microvm-x86_64.tar.gz | head -20
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —ç—Ç–∞–ø–æ–≤

```bash
# –ü–æ—à–∞–≥–æ–≤–æ
scripts/download-qemu.sh x86_64
scripts/create-portable-archive.sh x86_64  
scripts/create-archive.sh x86_64
```

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **wget** - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è QEMU –ø–∞–∫–µ—Ç–æ–≤
- **tar** - –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏/—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏
- **bash 4+** - –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

```bash
# Ubuntu/Debian
sudo apt-get install wget tar

# CentOS/RHEL
sudo yum install wget tar

# macOS
brew install wget gnu-tar
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### QEMU –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Alpine —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
wget -q --spider https://dl-cdn.alpinelinux.org/alpine/v3.19/main/x86_64/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é QEMU –≤ —Å–∫—Ä–∏–ø—Ç–µ
grep QEMU_VERSION scripts/download-qemu.sh
```

### –ê—Ä—Ö–∏–≤ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
ls -la desqemu-portable/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
df -h .
```

### –û—à–∏–±–∫–∏ –≤ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ–º –∞—Ä—Ö–∏–≤–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
tar -tzf desqemu-portable-microvm-x86_64.tar.gz > /dev/null
```

## üê≥ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker —Å–∫—Ä–∏–ø—Ç–æ–≤

### üöÄ auto-start-compose.sh

```bash
# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
/home/desqemu/auto-start-compose.sh

# –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
# - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç docker-compose.yml
# - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ—Ä—Ç—ã –∏–∑ compose —Ñ–∞–π–ª–∞  
# - –ó–∞–ø—É—Å–∫–∞–µ—Ç podman-compose up -d
# - –û–∂–∏–¥–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
# - –ó–∞–ø—É—Å–∫–∞–µ—Ç X11/VNC –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Chromium –Ω–∞ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—Ç—É
```

### üñ•Ô∏è start-desktop.sh

```bash
# –ó–∞–ø—É—Å–∫ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
/home/desqemu/start-desktop.sh

# –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ VNC: localhost:5900 (–ø–∞—Ä–æ–ª—å: desqemu)
```

### ‚öôÔ∏è desqemu-services.start  

```bash
# –°–∏—Å—Ç–µ–º–Ω—ã–π init —Å–∫—Ä–∏–ø—Ç (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
# - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç podman machine
# - –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ :8080
# - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç VNC –ø–∞—Ä–æ–ª—å
# - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ compose –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
du -h desqemu-portable-microvm-x86_64.tar.gz
```
